{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/project/frontend/app/patientappointments/page.tsx"],"sourcesContent":["\"use client\";\r\nimport toast from \"react-hot-toast\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useUserStore } from \"@/store/store\";\r\n\r\nexport default function MyAppointmentsPage() {\r\n  const [appointments, setAppointments] = useState([]);\r\n  const [showRescheduleModal, setShowRescheduleModal] = useState(false);\r\n  const [showCancelModal, setShowCancelModal] = useState(false);\r\n  const [selectedAppointmentId, setSelectedAppointmentId] = useState(null);\r\n\r\n  const storedUser = useUserStore((store) => store.user)\r\n  console.log('outside useeffect',storedUser)\r\n\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    // Fetch appointments from backend\r\n    const fetchAppointments = async () => {\r\n\r\n    if (!storedUser) {\r\n      //console.log(storedUser)\r\n      return;\r\n    }\r\n\r\n    console.log('inside useeffect', storedUser.id)\r\n     \r\n      try {\r\n        const res = await fetch(`http://localhost:5000/api/bookappointment/book/${storedUser.id}`); // replace with your actual API\r\n        const data = await res.json();\r\n        setAppointments(data);\r\n      } catch (err) {\r\n        console.error(\"Failed to fetch appointments:\", err);\r\n      }\r\n    };\r\n\r\n    fetchAppointments();\r\n  }, [storedUser]);\r\n\r\n  const handleRescheduleClick = (id: any) => {\r\n    setSelectedAppointmentId(id);\r\n    setShowRescheduleModal(true);\r\n  };\r\n\r\n  const handleConfirmReschedule = () => {\r\n    setShowRescheduleModal(false);\r\n    router.push(`/bookappointment?reschedule=${selectedAppointmentId}`);\r\n  };\r\n\r\n  const handleCancelClick = (id: any) => {\r\n    setSelectedAppointmentId(id);\r\n    console.log(id)\r\n    setShowCancelModal(true);\r\n  };\r\n\r\n  const handleConfirmCancel = async () => {\r\n    setShowCancelModal(false);\r\n    try {\r\n      await fetch(`http://localhost:5000/api/bookappointment/${selectedAppointmentId}/cancel`, {\r\n        method: \"DELETE\",\r\n      });\r\n      setAppointments((prev) =>\r\n        prev.filter((appt: any) => appt.id !== selectedAppointmentId)\r\n      );\r\n      toast.success(\"Appointment Cancelled\");\r\n    } catch (err) {\r\n      console.error(\"Cancel failed:\", err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-5xl mx-auto\">\r\n      <h2 className=\"text-3xl font-bold mb-6 text-gray-800\">My Appointments</h2>\r\n\r\n      <table className=\"w-full border rounded-lg shadow-sm\">\r\n        <thead className=\"bg-blue-100 text-left\">\r\n          <tr>\r\n            <th className=\"p-4\">Department</th>\r\n            <th className=\"p-4\">Date</th>\r\n            <th className=\"p-4\">Time</th>\r\n            <th className=\"p-4\">Amount</th>\r\n            <th className=\"p-4\">Status</th>\r\n            <th className=\"p-4\">Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {appointments.length === 0 ? (\r\n            <tr>\r\n              <td className=\"p-4 text-center\" colSpan={6}>\r\n                No appointments found.\r\n              </td>\r\n            </tr>\r\n          ) : (\r\n            appointments?.map((appointment: any) => (\r\n              <tr key={appointment.id} className=\"border-t\">\r\n                <td className=\"p-4\">{appointment.department?.name || \"General Medicine\"}</td>\r\n                <td className=\"p-4\">\r\n                  {new Date(appointment.appointmentDate).toLocaleDateString()}\r\n                </td>\r\n                <td className=\"p-4\">\r\n                  {new Date(appointment.appointmentTime).toLocaleTimeString([], {\r\n                    hour: \"2-digit\",\r\n                    minute: \"2-digit\",\r\n                  })}\r\n                </td>\r\n                <td className=\"p-4\">TSH {appointment.amount}</td>\r\n                <td className=\"p-4\">\r\n                  <span\r\n                    className={`px-4 py-2 rounded font-medium text-white ${\r\n                      appointment.status === \"Pending\"\r\n                        ? \"bg-yellow-500\"\r\n                        : \"bg-green-600\"\r\n                    }`}\r\n                  >\r\n                    {appointment.status}\r\n                  </span>\r\n                </td>\r\n                <td className=\"p-4 space-x-2\">\r\n                  <button\r\n                    onClick={() => handleRescheduleClick(appointment.id)}\r\n                    className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\"\r\n                  >\r\n                    Reschedule\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleCancelClick(appointment.id)}\r\n                    className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))\r\n          )}\r\n        </tbody>\r\n      </table>\r\n\r\n      {/* Reschedule Modal */}\r\n      {showRescheduleModal && (\r\n        <div className=\"fixed inset-0 flex items-center justify-center backdrop-blur-sm bg-black/30 z-50\">\r\n          <div className=\"bg-white p-6 rounded-xl shadow-lg w-96 text-center\">\r\n            <h3 className=\"text-xl font-semibold mb-4\">\r\n              Do you want to reschedule your appointment?\r\n            </h3>\r\n            <div className=\"flex justify-center space-x-4\">\r\n              <button\r\n                onClick={handleConfirmReschedule}\r\n                className=\"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700\"\r\n              >\r\n                Yes\r\n              </button>\r\n              <button\r\n                onClick={() => setShowRescheduleModal(false)}\r\n                className=\"border border-gray-300 px-6 py-2 rounded hover:bg-gray-100\"\r\n              >\r\n                No\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Cancel Modal */}\r\n      {showCancelModal && (\r\n        <div className=\"fixed inset-0 flex items-center justify-center backdrop-blur-sm bg-black/30 z-50\">\r\n          <div className=\"bg-white p-6 rounded-xl shadow-lg w-96 text-center\">\r\n            <h3 className=\"text-xl font-semibold mb-4\">\r\n              Are you sure you want to cancel your appointment?\r\n            </h3>\r\n            <div className=\"flex justify-center space-x-4\">\r\n              <button\r\n                onClick={handleConfirmCancel}\r\n                className=\"bg-red-600 text-white px-6 py-2 rounded hover:bg-red-700\"\r\n              >\r\n                Yes\r\n              </button>\r\n              <button\r\n                onClick={() => setShowCancelModal(false)}\r\n                className=\"border border-gray-300 px-6 py-2 rounded hover:bg-gray-100\"\r\n              >\r\n                No\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;;;AAJA;;;;;AAMe,SAAS;;IACtB,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE,EAAE;IACnD,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC/D,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvD,MAAM,CAAC,uBAAuB,yBAAyB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEnE,MAAM,aAAa,CAAA,GAAA,iHAAA,CAAA,eAAY,AAAD;uDAAE,CAAC,QAAU,MAAM,IAAI;;IACrD,QAAQ,GAAG,CAAC,qBAAoB;IAEhC,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;wCAAE;YACR,kCAAkC;YAClC,MAAM;kEAAoB;oBAE1B,IAAI,CAAC,YAAY;wBACf,yBAAyB;wBACzB;oBACF;oBAEA,QAAQ,GAAG,CAAC,oBAAoB,WAAW,EAAE;oBAE3C,IAAI;wBACF,MAAM,MAAM,MAAM,MAAM,CAAC,+CAA+C,EAAE,WAAW,EAAE,EAAE,GAAG,+BAA+B;wBAC3H,MAAM,OAAO,MAAM,IAAI,IAAI;wBAC3B,gBAAgB;oBAClB,EAAE,OAAO,KAAK;wBACZ,QAAQ,KAAK,CAAC,iCAAiC;oBACjD;gBACF;;YAEA;QACF;uCAAG;QAAC;KAAW;IAEf,MAAM,wBAAwB,CAAC;QAC7B,yBAAyB;QACzB,uBAAuB;IACzB;IAEA,MAAM,0BAA0B;QAC9B,uBAAuB;QACvB,OAAO,IAAI,CAAC,CAAC,4BAA4B,EAAE,uBAAuB;IACpE;IAEA,MAAM,oBAAoB,CAAC;QACzB,yBAAyB;QACzB,QAAQ,GAAG,CAAC;QACZ,mBAAmB;IACrB;IAEA,MAAM,sBAAsB;QAC1B,mBAAmB;QACnB,IAAI;YACF,MAAM,MAAM,CAAC,0CAA0C,EAAE,sBAAsB,OAAO,CAAC,EAAE;gBACvF,QAAQ;YACV;YACA,gBAAgB,CAAC,OACf,KAAK,MAAM,CAAC,CAAC,OAAc,KAAK,EAAE,KAAK;YAEzC,0JAAA,CAAA,UAAK,CAAC,OAAO,CAAC;QAChB,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,kBAAkB;QAClC;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAAwC;;;;;;0BAEtD,6LAAC;gBAAM,WAAU;;kCACf,6LAAC;wBAAM,WAAU;kCACf,cAAA,6LAAC;;8CACC,6LAAC;oCAAG,WAAU;8CAAM;;;;;;8CACpB,6LAAC;oCAAG,WAAU;8CAAM;;;;;;8CACpB,6LAAC;oCAAG,WAAU;8CAAM;;;;;;8CACpB,6LAAC;oCAAG,WAAU;8CAAM;;;;;;8CACpB,6LAAC;oCAAG,WAAU;8CAAM;;;;;;8CACpB,6LAAC;oCAAG,WAAU;8CAAM;;;;;;;;;;;;;;;;;kCAGxB,6LAAC;kCACE,aAAa,MAAM,KAAK,kBACvB,6LAAC;sCACC,cAAA,6LAAC;gCAAG,WAAU;gCAAkB,SAAS;0CAAG;;;;;;;;;;mCAK9C,cAAc,IAAI,CAAC,4BACjB,6LAAC;gCAAwB,WAAU;;kDACjC,6LAAC;wCAAG,WAAU;kDAAO,YAAY,UAAU,EAAE,QAAQ;;;;;;kDACrD,6LAAC;wCAAG,WAAU;kDACX,IAAI,KAAK,YAAY,eAAe,EAAE,kBAAkB;;;;;;kDAE3D,6LAAC;wCAAG,WAAU;kDACX,IAAI,KAAK,YAAY,eAAe,EAAE,kBAAkB,CAAC,EAAE,EAAE;4CAC5D,MAAM;4CACN,QAAQ;wCACV;;;;;;kDAEF,6LAAC;wCAAG,WAAU;;4CAAM;4CAAK,YAAY,MAAM;;;;;;;kDAC3C,6LAAC;wCAAG,WAAU;kDACZ,cAAA,6LAAC;4CACC,WAAW,CAAC,yCAAyC,EACnD,YAAY,MAAM,KAAK,YACnB,kBACA,gBACJ;sDAED,YAAY,MAAM;;;;;;;;;;;kDAGvB,6LAAC;wCAAG,WAAU;;0DACZ,6LAAC;gDACC,SAAS,IAAM,sBAAsB,YAAY,EAAE;gDACnD,WAAU;0DACX;;;;;;0DAGD,6LAAC;gDACC,SAAS,IAAM,kBAAkB,YAAY,EAAE;gDAC/C,WAAU;0DACX;;;;;;;;;;;;;+BAjCI,YAAY,EAAE;;;;;;;;;;;;;;;;YA4C9B,qCACC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;sCAA6B;;;;;;sCAG3C,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCACC,SAAS;oCACT,WAAU;8CACX;;;;;;8CAGD,6LAAC;oCACC,SAAS,IAAM,uBAAuB;oCACtC,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;YASR,iCACC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;sCAA6B;;;;;;sCAG3C,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCACC,SAAS;oCACT,WAAU;8CACX;;;;;;8CAGD,6LAAC;oCACC,SAAS,IAAM,mBAAmB;oCAClC,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASf;GAvLwB;;QAMH,iHAAA,CAAA,eAAY;QAGhB,qIAAA,CAAA,YAAS;;;KATF","debugId":null}},
    {"offset": {"line": 400, "column": 0}, "map": {"version":3,"sources":["file://C%3A/project/frontend/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}