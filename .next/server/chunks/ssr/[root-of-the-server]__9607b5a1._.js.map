{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file://C%3A/project/frontend/app/login/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { Eye, EyeOff } from \"lucide-react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useUserStore } from \"@/store/store\";\r\n\r\nexport default function LoginPage() {\r\n  const router = useRouter();\r\n\r\n  const setUser = use\r\n\r\n  const [form, setForm] = useState({ email: \"\", password: \"\" });\r\n  const [errors, setErrors] = useState({ email: \"\", password: \"\" });\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [isScrolled, setIsScrolled] = useState(false);\r\n  const [showForgotModal, setShowForgotModal] = useState(false);\r\n\r\n  const [resetEmail, setResetEmail] = useState(\"\");\r\n  const [isSending, setIsSending] = useState(false);\r\n  const [resetMessage, setResetMessage] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const handleScroll = () => setIsScrolled(window.scrollY > 20);\r\n    window.addEventListener(\"scroll\", handleScroll);\r\n    return () => window.removeEventListener(\"scroll\", handleScroll);\r\n  }, []);\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setForm((prev) => ({ ...prev, [e.target.name]: e.target.value }));\r\n  };\r\n\r\n  const validateEmail = (email: string) =>\r\n    /\\S+@\\S+\\.\\S+/.test(email) ? \"\" : \"Enter a valid email.\";\r\n\r\n  const handleLogin = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    const emailError = validateEmail(form.email);\r\n\r\n    if (emailError) {\r\n      setErrors({ ...errors, email: emailError });\r\n      return;\r\n    }\r\n\r\n    setErrors({ email: \"\", password: \"\" });\r\n\r\n    try {\r\n      const res = await fetch(\"http://localhost:5000/api/login\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(form),\r\n      });\r\n\r\n      const data = await res.json();\r\n      console.log(data.user.name)\r\n\r\n      if (res.ok) {\r\n        localStorage.setItem(\"user\", JSON.stringify(data.user));\r\n        const { email } = data.user;\r\n\r\n        if (email === \"muganyizi05@gmail.com\") router.push(\"/admindashboard\");\r\n        else if (email === \"irenekokujona@gmail.com\") router.push(\"/receptionistdashboard\");\r\n        else router.push(\"/patientdashboard\");\r\n      } else {\r\n        setErrors({ ...errors, password: data.error || \"Login failed\" });\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Login error:\", err);\r\n      setErrors({ ...errors, password: \"Error connecting to server\" });\r\n    }\r\n  };\r\n\r\n  const handleForgotSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setIsSending(true);\r\n\r\n    try {\r\n      const res = await fetch(\"http://localhost:5000/api/forgot-password\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ email: resetEmail }),\r\n      });\r\n\r\n      const data = await res.json();\r\n      setResetMessage(res.ok ? \"Reset link sent! Check your email.\" : data.error || \"Failed to send reset link.\");\r\n    } catch (err) {\r\n      console.error(\"Reset error:\", err);\r\n      setResetMessage(\"Something went wrong.\");\r\n    } finally {\r\n      setIsSending(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <main className=\"relative flex flex-col flex-1 min-h-screen\">\r\n      {/* Navbar */}\r\n      <nav\r\n        className={`fixed top-0 w-full z-50 flex justify-between items-center px-6 transition-all duration-300 shadow-md ${\r\n          isScrolled ? \"bg-blue-700\" : \"bg-blue-600\"\r\n        } py-3`}\r\n      >\r\n        <div className=\"flex items-center space-x-4\">\r\n          <div className=\"w-10 h-10 flex items-center justify-center rounded-full bg-white\">\r\n            <span className=\"text-blue-600 text-4xl font-bold\">+</span>\r\n          </div>\r\n          <h1 className=\"text-2xl text-white font-bold\">MASS</h1>\r\n        </div>\r\n        <div className=\"space-x-6\">\r\n          <Link href=\"/\" className=\"text-white font-medium\">Home</Link>\r\n          <Link href=\"/signup\" className=\"text-white font-medium\">Sign Up</Link>\r\n        </div>\r\n      </nav>\r\n\r\n      {/* Login Form */}\r\n      <section className={`flex-1 flex justify-center items-center p-4 pt-24 ${showForgotModal ? \"blur-sm\" : \"\"}`}>\r\n        <form\r\n          onSubmit={handleLogin}\r\n          className=\"bg-white p-8 rounded-xl shadow-lg w-full max-w-md space-y-6\"\r\n        >\r\n          <h2 className=\"text-3xl font-bold text-center\">Login</h2>\r\n\r\n          <FormInput\r\n            label=\"Email\"\r\n            name=\"email\"\r\n            type=\"email\"\r\n            value={form.email}\r\n            onChange={handleChange}\r\n            error={errors.email}\r\n          />\r\n          <FormInput\r\n            label=\"Password\"\r\n            name=\"password\"\r\n            type={showPassword ? \"text\" : \"password\"}\r\n            value={form.password}\r\n            onChange={handleChange}\r\n            error={errors.password}\r\n            showToggle\r\n            toggleVisibility={() => setShowPassword((prev) => !prev)}\r\n            visible={showPassword}\r\n          />\r\n\r\n          <div className=\"text-right\">\r\n            <p\r\n              className=\"text-sm text-blue-600 hover:underline cursor-pointer\"\r\n              onClick={() => setShowForgotModal(true)}\r\n            >\r\n              Forgot Password?\r\n            </p>\r\n          </div>\r\n\r\n          <button\r\n            type=\"submit\"\r\n            className=\"w-full bg-blue-500 text-white font-semibold py-3 rounded-lg hover:bg-blue-600 transition\"\r\n          >\r\n            Login\r\n          </button>\r\n        </form>\r\n      </section>\r\n\r\n      {/* Forgot Password Modal */}\r\n      {showForgotModal && (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm\">\r\n          <div className=\"bg-white p-6 rounded-lg shadow-lg w-full max-w-sm relative\">\r\n            <button\r\n              onClick={() => setShowForgotModal(false)}\r\n              className=\"absolute top-2 right-3 text-gray-600 hover:text-gray-800 text-2xl\"\r\n            >\r\n              Ã—\r\n            </button>\r\n            <h3 className=\"text-xl font-semibold mb-4\">Reset Password</h3>\r\n            <form onSubmit={handleForgotSubmit}>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Email\r\n              </label>\r\n              <input\r\n                type=\"email\"\r\n                value={resetEmail}\r\n                onChange={(e) => setResetEmail(e.target.value)}\r\n                className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                placeholder=\"Enter your email\"\r\n                required\r\n              />\r\n              <button\r\n                type=\"submit\"\r\n                disabled={isSending}\r\n                className=\"w-full mt-4 bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700 transition disabled:opacity-50\"\r\n              >\r\n                {isSending ? \"Sending...\" : \"Send Reset Link\"}\r\n              </button>\r\n              {resetMessage && (\r\n                <p className=\"mt-3 text-sm text-center text-gray-600\">{resetMessage}</p>\r\n              )}\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </main>\r\n  );\r\n}\r\n\r\nfunction FormInput({\r\n  label,\r\n  name,\r\n  value,\r\n  onChange,\r\n  type = \"text\",\r\n  error = \"\",\r\n  showToggle = false,\r\n  toggleVisibility = () => {},\r\n  visible = false,\r\n}: {\r\n  label: string;\r\n  name: string;\r\n  value: string;\r\n  onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n  type?: string;\r\n  error?: string;\r\n  showToggle?: boolean;\r\n  toggleVisibility?: () => void;\r\n  visible?: boolean;\r\n}) {\r\n  return (\r\n    <div className=\"relative\">\r\n      <label className=\"block text-gray-700 font-medium mb-2\">{label}</label>\r\n      <input\r\n        type={type}\r\n        name={name}\r\n        value={value}\r\n        onChange={onChange}\r\n        className=\"w-full border border-gray-300 rounded-lg p-3 pr-12 focus:outline-none focus:ring-2 focus:ring-blue-400\"\r\n        required\r\n      />\r\n      {showToggle && (\r\n        <span\r\n          className=\"absolute right-3 top-[43px] cursor-pointer text-gray-500\"\r\n          onClick={toggleVisibility}\r\n        >\r\n          {visible ? <EyeOff size={20} /> : <Eye size={20} />}\r\n        </span>\r\n      )}\r\n      {error && <p className=\"text-red-500 text-sm mt-1\">{error}</p>}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}